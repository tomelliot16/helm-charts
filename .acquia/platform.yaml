apiVersion: v1  # This informs what versions of ak8s this file is compatible with
service: stormforge
project: sre
owner: devops
base:
  # Bootstrap
  standard:
    type: bootstrap
    version: v0.8.1
    values:
      syncPolicy:
        automated:
          prune: true
          allowEmpty: true
      clusterTypes:
        - "internal"
        - "polaris"
      targetNamespace: stormforge-system
      repoURL: https://github.com/acquia/sre-stormforge
      path: charts/optimize-live

variants:
  - name: dev
    overrides:
      standard:
        values:
          valueFiles:
            - values-dev.yaml
          targetRevision: main
          #--- Uncomment section if testing in a PR ---#
          #
          # clusterOverrides:
          #   - selectorLabels:
          #     - key: name
          #       value: csd-hades82db9
          #     targetRevision: MY-PR-BRANCH
          #     valuesFiles:
          #       - values.yaml
          #
          #-- Avoid electro, loki, or uguisud in PRs --#

  - name: qa
    overrides:
      standard:
        values:
          valueFiles:
            - values-qa.yaml
          targetRevision: v1.1.3
          extraClusterMatchLabels:
            name: qeorg-zoom82b151

  - name: staging
    overrides:
      standard:
        values:
          valueFiles:
            - values-staging.yaml
          targetRevision: v1.1.3

